# ๐ ะะฐะทะฒะตัััะฒะฐะฝะธะต E-commerce ะะธะบัะพัะตัะฒะธัะพะฒ ั ะคัะพะฝัะตะฝะดะพะผ

## ๐ ะะฑะทะพั ัะธััะตะผั

ะะพะปะฝะฐั ะผะธะบัะพัะตัะฒะธัะฝะฐั ัะธััะตะผะฐ ั ะฒะตะฑ-ะธะฝัะตััะตะนัะพะผ:

### ะะพะผะฟะพะฝะตะฝัั:
- **Frontend** (Nginx) - http://localhost:3000
- **API Gateway** (YARP) - http://localhost:8080  
- **Orders Service** - ะกะตัะฒะธั ะทะฐะบะฐะทะพะฒ
- **Payments Service** - ะกะตัะฒะธั ะฟะปะฐัะตะถะตะน
- **SQL Server** - ะะฐะทะฐ ะดะฐะฝะฝัั
- **RabbitMQ** - ะัะตัะตะดั ัะพะพะฑัะตะฝะธะน

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Frontend      โ    โ   API Gateway   โ    โ   Orders API    โ
โ   (Nginx)       โโโโโถโ   (YARP)        โโโโโถโ   (Orders DB)   โ
โ   Port: 3000    โ    โ   Port: 8080    โ    โ                 โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                                โ                        โ
                                โ                        โผ
                                โ               โโโโโโโโโโโโโโโโโโโ
                                โ               โ   RabbitMQ      โ
                                โ               โ   Port: 5672    โ
                                โ               โ   UI: 15672     โ
                                โ               โโโโโโโโโโโโโโโโโโโ
                                โ                        โฒ
                                โ                        โ
                                โผ               โโโโโโโโโโโโโโโโโโโ
                       โโโโโโโโโโโโโโโโโโโ     โ   Payments API  โ
                       โ   SQL Server    โโโโโโโ   (Payments DB) โ
                       โ   Port: 1433    โ     โ                 โ
                       โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
```

## ๐ ะัััััะน ะทะฐะฟััะบ

### 1. ะะฐะฟััะบ ะฒัะตะน ัะธััะตะผั:

```bash
# ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ ั ััะพะฝัะตะฝะดะพะผ
docker-compose up --build -d

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ
docker-compose ps
```

### 2. ะะพัััะฟ ะบ ัะธััะตะผะต:

- **ะะตะฑ-ะธะฝัะตััะตะนั**: http://localhost:3000
- **API Gateway**: http://localhost:8080
- **RabbitMQ Management**: http://localhost:15672 (guest/guest)

### 3. ะััะฐะฝะพะฒะบะฐ ัะธััะตะผั:

```bash
docker-compose down
```

## ๐ฏ ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ

ะัะบัะพะนัะต http://localhost:3000 ะฒ ะฑัะฐัะทะตัะต ะธ ะธัะฟะพะปัะทัะนัะต ะบะฝะพะฟะบะธ ะดะปั:

### Payments Service:
1. **ะกะพะทะดะฐัั ะฐะบะบะฐัะฝั** - ัะพะทะดะฐะตั ะฝะพะฒัะน ะฐะบะบะฐัะฝั ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั
2. **ะะพะฟะพะปะฝะธัั ะฑะฐะปะฐะฝั** - ะดะพะฑะฐะฒะปัะตั ััะตะดััะฒะฐ ะฝะฐ ะฐะบะบะฐัะฝั
3. **ะัะพะฒะตัะธัั ะฑะฐะปะฐะฝั** - ะฟะพะบะฐะทัะฒะฐะตั ัะตะบััะธะน ะฑะฐะปะฐะฝั

### Orders Service:
1. **ะกะพะทะดะฐัั ะทะฐะบะฐะท** - ัะพะทะดะฐะตั ะฝะพะฒัะน ะทะฐะบะฐะท
2. **ะะพะปััะธัั ะทะฐะบะฐะทั** - ะฟะพะบะฐะทัะฒะฐะตั ัะฟะธัะพะบ ะทะฐะบะฐะทะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปั

## ๐ง API Endpoints

### Payments Service
- `POST /api/payments/accounts` - ะกะพะทะดะฐะฝะธะต ะฐะบะบะฐัะฝัะฐ
- `POST /api/payments/accounts/{id}/top-up` - ะะพะฟะพะปะฝะตะฝะธะต ะฑะฐะปะฐะฝัะฐ
- `GET /api/payments/accounts/{id}/balance` - ะัะพะฒะตัะบะฐ ะฑะฐะปะฐะฝัะฐ

### Orders Service  
- `POST /api/orders` - ะกะพะทะดะฐะฝะธะต ะทะฐะบะฐะทะฐ
- `GET /api/orders?userId={id}` - ะะพะปััะตะฝะธะต ะทะฐะบะฐะทะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปั

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะะพะณะธ ัะตัะฒะธัะพะฒ:
```bash
# ะัะต ะปะพะณะธ
docker-compose logs -f

# ะะพะฝะบัะตัะฝัะน ัะตัะฒะธั
docker-compose logs -f frontend
docker-compose logs -f api-gateway
docker-compose logs -f orders-api
docker-compose logs -f payments-api
```

### ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั:
```bash
# ะัะพะฒะตัะบะฐ API Gateway
curl http://localhost:8080/api/orders

# ะัะพะฒะตัะบะฐ ััะพะฝัะตะฝะดะฐ
curl http://localhost:3000
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### ะะฒัะพะผะฐัะธัะตัะบะพะต ัะตััะธัะพะฒะฐะฝะธะต ัะตัะตะท ะฒะตะฑ-ะธะฝัะตััะตะนั:
1. ะัะบัะพะนัะต http://localhost:3000
2. ะะฐะถะผะธัะต "ะกะพะทะดะฐัั ะฐะบะบะฐัะฝั"
3. ะกะบะพะฟะธััะนัะต Account ID ะฒ ะฟะพะปะต ะฟะพะฟะพะปะฝะตะฝะธั
4. ะะฐะถะผะธัะต "ะะพะฟะพะปะฝะธัั" ั ััะผะผะพะน 1000
5. ะะฐะถะผะธัะต "ะัะพะฒะตัะธัั ะฑะฐะปะฐะฝั"
6. ะะฐะถะผะธัะต "ะกะพะทะดะฐัั ะทะฐะบะฐะท" ั ััะผะผะพะน 299.99
7. ะะฐะถะผะธัะต "ะะพะปััะธัั ะทะฐะบะฐะทั"

### ะขะตััะธัะพะฒะฐะฝะธะต ัะตัะตะท cURL:
```bash
# 1. ะกะพะทะดะฐะฝะธะต ะฐะบะบะฐัะฝัะฐ
curl -X POST http://localhost:8080/api/payments/accounts \
  -H "Content-Type: application/json" \
  -d '{"userId":"11111111-1111-1111-1111-111111111111"}'

# 2. ะะพะฟะพะปะฝะตะฝะธะต ะฑะฐะปะฐะฝัะฐ (ะทะฐะผะตะฝะธัะต account-id)
curl -X POST http://localhost:8080/api/payments/accounts/{account-id}/top-up \
  -H "Content-Type: application/json" \
  -d '{"amount":1000.50}'

# 3. ะกะพะทะดะฐะฝะธะต ะทะฐะบะฐะทะฐ
curl -X POST http://localhost:8080/api/orders \
  -H "Content-Type: application/json" \
  -d '{"userId":"11111111-1111-1111-1111-111111111111","amount":299.99}'
```

## โก Unit Tests

```bash
# ะะฐะฟััะบ ะฒัะตั ัะตััะพะฒ
dotnet test

# ะขะตััั Orders Service
dotnet test src/Services/Orders/Orders.Tests/

# ะขะตััั Payments Service  
dotnet test src/Services/Payments/Payments.Tests/
```

## ๐ ะฃัััะฐะฝะตะฝะธะต ะฝะตะธัะฟัะฐะฒะฝะพััะตะน

### ะัะพะฑะปะตะผะฐ: ะะพัั ัะถะต ะธัะฟะพะปัะทัะตััั
```bash
# ะะฐะนัะธ ะฟัะพัะตัั ะธัะฟะพะปัะทัััะธะน ะฟะพัั
lsof -i :3000
lsof -i :8080

# ะััะฐะฝะพะฒะธัั ะฒัะต ะบะพะฝัะตะนะฝะตัั
docker-compose down
```

### ะัะพะฑะปะตะผะฐ: ะะฐะทะฐ ะดะฐะฝะฝัั ะฝะต ะฟะพะดะบะปััะฐะตััั
```bash
# ะะตัะตะทะฐะฟััะบ ั ะฟะตัะตัะฑะพัะบะพะน
docker-compose down
docker-compose up --build -d

# ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ SQL Server
docker-compose logs sqlserver
```

### ะัะพะฑะปะตะผะฐ: RabbitMQ ะฝะตะดะพัััะฟะตะฝ
```bash
# ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ RabbitMQ
docker-compose logs rabbitmq

# ะะตัะตะทะฐะฟััะบ ัะพะปัะบะพ RabbitMQ
docker-compose restart rabbitmq
```

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

- **ะัะตะผั ััะฐััะฐ**: ~45 ัะตะบัะฝะด ะดะปั ะฟะพะปะฝะพะน ะธะฝะธัะธะฐะปะธะทะฐัะธะธ
- **ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ**: ~2GB RAM
- **CPU**: ะะฟัะธะผะธะทะธัะพะฒะฐะฝะพ ะดะปั development

## ๐ ะัะพะฑะตะฝะฝะพััะธ

โ **ะะพะปะฝะฐั ะผะธะบัะพัะตัะฒะธัะฝะฐั ะฐััะธัะตะบัััะฐ**  
โ **ะะตะฑ-ะธะฝัะตััะตะนั ะดะปั ัะตััะธัะพะฒะฐะฝะธั**  
โ **API Gateway ั ะผะฐัััััะธะทะฐัะธะตะน**  
โ **ะัะธะฝััะพะฝะฝัะต ัะพะพะฑัะตะฝะธั ัะตัะตะท RabbitMQ**  
โ **Transactional Outbox/Inbox patterns**  
โ **Clean Architecture**  
โ **CQRS ั MediatR**  
โ **Docker ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั**  
โ **Unit ัะตััั ะฟะพะบัััะธะต**  

---

**๐ฏ ะกะธััะตะผะฐ ะณะพัะพะฒะฐ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะธ ะดะตะผะพะฝัััะฐัะธะธ!** 